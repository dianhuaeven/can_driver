<launch>
  <!-- =========================================================
       can_driver 启动文件
       启动顺序：加载参数 → 启动节点 → 加载控制器
       ========================================================= -->

  <!-- 1. 加载硬件参数（关节映射、控制频率） -->
  <rosparam file="$(find can_driver)/config/can_driver.yaml" command="load"/>

  <!-- 2. 加载控制器参数（joint_state / arm / wheel controller） -->
  <rosparam file="$(find can_driver)/config/ros_controllers.yaml" command="load"/>

  <!-- 3. 启动 can_driver_node（包含 CanDriverHW + controller_manager 主循环） -->
  <node pkg="can_driver" type="can_driver_node" name="can_driver_node" output="screen"/>

  <!-- 4. 加载并启动控制器
       joint_state_controller：必须启动，提供 /joint_states topic
       arm_controller：机械臂轨迹控制，供 MoveIt 使用
       wheel_controller：差速底盘控制，供 Navigation Stack 使用
       如果暂时不需要某个控制器，可以将其从 args 中删除 -->
  <node pkg="controller_manager" type="spawner" name="controller_spawner"
        args="joint_state_controller arm_controller wheel_controller"/>

</launch>
