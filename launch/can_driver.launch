<launch>
  <!-- =========================================================
       can_driver 启动文件（UR5 仿真测试版）
       启动顺序：加载 URDF → 加载参数 → 启动节点 → 加载控制器
       ========================================================= -->

  <!-- 1. 加载 UR5 URDF 到 robot_description 参数（供 JointTrajectoryController 使用） -->
  <param name="robot_description" command="$(find xacro)/xacro '$(find ur_description)/urdf/ur5.xacro'"/>

  <!-- 2. 加载硬件参数（关节映射、控制频率） -->
  <rosparam file="$(find can_driver)/config/can_driver.yaml" command="load"/>

  <!-- 3. 加载控制器参数（joint_state / arm / wheel controller） -->
  <rosparam file="$(find can_driver)/config/ros_controllers.yaml" command="load"/>

  <!-- 4. 启动 can_driver_node（包含 CanDriverHW + controller_manager 主循环） -->
  <node pkg="can_driver" type="can_driver_node" name="can_driver_node" output="screen"/>

  <!-- 5. 加载并启动控制器
       joint_state_controller：发布 /joint_states
       arm_controller：接收 MoveIt 轨迹指令
       wheel_controller：暂时注释（UR5 无底盘） -->
  <node pkg="controller_manager" type="spawner" name="controller_spawner"
        args="joint_state_controller arm_controller"/>

</launch>
